{"version":3,"file":"js/30.de9477d0.js","mappings":"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","sources":["webpack://vue/./src/views/front/Person.vue","webpack://vue/src/views/front/Person.vue","webpack://vue/./src/views/front/Person.vue?76bf","webpack://vue/./src/views/front/Person.vue?3109"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"position\":\"relative\"}},[_c('el-card',{staticStyle:{\"max-width\":\"500px\",\"margin\":\"auto\"}},[_c('el-form',{ref:\"ruleForm\",attrs:{\"model\":_vm.ruleForm,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('username'),\"prop\":\"username\"}},[_c('el-input',{attrs:{\"disabled\":\"\",\"autocomplete\":\"off\"},model:{value:(_vm.ruleForm.username),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"username\", $$v)},expression:\"ruleForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('nickname'),\"prop\":\"nickname\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.ruleForm.nickname),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"nickname\", $$v)},expression:\"ruleForm.nickname\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('email'),\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.ruleForm.email),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"email\", $$v)},expression:\"ruleForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('phone'),\"prop\":\"phone\"}},[_c('el-input',{model:{value:(_vm.ruleForm.phone),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"phone\", $$v)},expression:\"ruleForm.phone\"}})],1),_c('el-form-item',{attrs:{\"label\":_vm.$t('address'),\"prop\":\"address\"}},[_c('el-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.ruleForm.address),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"address\", $$v)},expression:\"ruleForm.address\"}})],1),_c('el-form-item',[_c('el-button',{directives:[{name:\"no-more-click\",rawName:\"v-no-more-click\"}],attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.save('ruleForm')}}},[_vm._v(_vm._s(_vm.$t('confirm')))])],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div style=\"position: relative\">\r\n    <el-card style=\"max-width: 500px;margin: auto\">\r\n        <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"80px\">\r\n            <el-form-item :label=\"$t('username')\" prop=\"username\">\r\n                <el-input v-model=\"ruleForm.username\" disabled autocomplete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item :label=\"$t('nickname')\" prop=\"nickname\">\r\n                <el-input v-model=\"ruleForm.nickname\" autocomplete=\"off\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item :label=\"$t('email')\" prop=\"email\">\r\n                <el-input v-model=\"ruleForm.email\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item :label=\"$t('phone')\" prop=\"phone\">\r\n                <el-input v-model=\"ruleForm.phone\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item :label=\"$t('address')\" prop=\"address\">\r\n                <el-input type=\"textarea\" v-model=\"ruleForm.address\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button v-no-more-click type=\"primary\" @click=\"save('ruleForm')\">{{$t('confirm')}}</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </el-card>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {serverIp} from \"../../../public/config\";\r\nimport {ValidStringPattern, ValidPhonePattern, ValidNicknamePattern} from \"../../../public/config\";\r\nexport default {\r\n    name: \"Person\",\r\n    data() {\r\n        var validateOthers = (rule, value, callback) => {\r\n            if(this.isValidString(value) == false){\r\n                // this.$refs.ruleForm.validateField('checkPass');\r\n                callback(new Error('цифры, английский, русский языки и @.*/-+_:'));\r\n            } else {\r\n                callback();\r\n            }\r\n        };\r\n        var validateNickname = (rule, value, callback) => {\r\n            if(this.isValidStringNickname(value) == false){\r\n                // this.$refs.ruleForm.validateField('checkPass');\r\n                callback(new Error('цифры, английский и русский языки'));\r\n            } else {\r\n                callback();\r\n            }\r\n        };\r\n        var validatePhone = (rule, value, callback) => {\r\n            if(this.isValidStringPhone(value) == false){\r\n                // this.$refs.ruleForm.validateField('checkPass');\r\n                callback(new Error('Example：89692184441'));\r\n            } else {\r\n                callback();\r\n            }\r\n        };\r\n        // 账号密码使用validateOthers，昵称使用validateNickname，电话号码使用validatePhone，地址只限长度\r\n        return {\r\n            serverIp: serverIp,\r\n            pass: '',\r\n            user: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {},\r\n            ruleForm: {},\r\n            rules:{\r\n                username: [\r\n                    { required: true, message: 'имя пользователя', trigger: 'blur' },\r\n                    { min: 5, max: 50, message: 'Длина от 5 до 50 символов', trigger: 'blur' },\r\n                    { validator: validateOthers,  trigger: 'blur'}\r\n                ],\r\n                nickname: [\r\n                    { required: true, message: 'псевдоним', trigger: 'blur' },\r\n                    { min: 1, max: 50, message: 'Длина от 5 до 50 символов', trigger: 'blur' },\r\n                    { validator: validateNickname,  trigger: 'blur'}\r\n                ],\r\n                email: [\r\n                    { required: true, message: 'адрес электронной почты example.com', trigger: 'blur' },\r\n                    { min: 5, max: 50, message: 'Длина от 5 до 50 символов', trigger: 'blur' },\r\n                    { validator: validateOthers,  trigger: 'blur'}\r\n                ],\r\n                phone: [\r\n                    { required: true, message: 'номер телефона', trigger: 'blur' },\r\n                    { min: 5, max: 15, message: 'Длина от 5 до 15 символов', trigger: 'blur' },\r\n                    { validator: validatePhone,  trigger: 'blur'}\r\n                ],\r\n                address: [\r\n                    { required: false, message: '', trigger: 'blur' },\r\n                    { min: 0, max: 200, message: 'Длина от 0 до 200 символов', trigger: 'blur' },\r\n                ],\r\n            },\r\n        }\r\n    },\r\n    created() {\r\n        this.getUser().then(res => {\r\n            this.ruleForm = res\r\n            console.log(this.ruleForm)\r\n        })\r\n    },\r\n    methods: {\r\n        async getUser() {\r\n            return (await this.request.get(\"/user/username/\" + this.user.username)).data\r\n        },\r\n        save() {\r\n            const loading = this.$loading({\r\n                lock: true,\r\n                text: 'Loading',\r\n                spinner: 'el-icon-loading',\r\n                background: 'rgba(0, 0, 0, 0.8)'\r\n            });\r\n            setTimeout(() => {\r\n                loading.close();\r\n            }, 10000);\r\n            this.$refs['ruleForm'].validate((valid) => {\r\n                if (valid) {\r\n                    this.request.post(\"/user/saveByUser\", this.ruleForm).then(res => {\r\n                        if (res.code === '200') {\r\n                            this.$message.success(this.$t('ModifiedSuccessfully'))\r\n\r\n                            // 触发父级更新User的方法\r\n                            this.$emit(\"refreshUser\")\r\n\r\n                            // 更新浏览器存储的用户信息\r\n                            this.getUser().then(res => {\r\n                                res.token = JSON.parse(localStorage.getItem(\"user\")).token\r\n                                localStorage.setItem(\"user\", JSON.stringify(res))\r\n                            })\r\n\r\n                        } else {\r\n                            this.$message.error(this.$t('optfail'))\r\n                        }\r\n                        loading.close();\r\n                    })\r\n                } else {\r\n                    this.$message.error(this.$t('optfail'))\r\n                    loading.close();\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        handleAvatarSuccess(res) {\r\n            this.form.avatarUrl = res\r\n        },\r\n        isValidString(str) {\r\n            try {\r\n                return ValidStringPattern.test(str);\r\n            } catch (e){\r\n                return null\r\n            }\r\n        },\r\n        isValidStringPhone(str) {\r\n            try {\r\n                return ValidPhonePattern.test(str);\r\n            } catch (e){\r\n                return null\r\n            }\r\n        },\r\n        isValidStringNickname(str) {\r\n            try {\r\n                return ValidNicknamePattern.test(str);\r\n            } catch (e){\r\n                return null\r\n            }\r\n        },\r\n    }\r\n}\r\n</script>\r\n<style>\r\n.avatar-uploader {\r\n    text-align: center;\r\n    padding-bottom: 10px;\r\n}\r\n.avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n    border-color: #409EFF;\r\n}\r\n.avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 138px;\r\n    height: 138px;\r\n    line-height: 138px;\r\n    text-align: center;\r\n}\r\n.avatar {\r\n    width: 138px;\r\n    height: 138px;\r\n    display: block;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Person.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Person.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Person.vue?vue&type=template&id=209572f0&\"\nimport script from \"./Person.vue?vue&type=script&lang=js&\"\nexport * from \"./Person.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Person.vue?vue&type=style&index=0&id=209572f0&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticStyle","ref","attrs","ruleForm","rules","$t","model","value","username","callback","$$v","$set","expression","nickname","email","phone","address","directives","name","rawName","on","$event","save","_v","_s","staticRenderFns","data","validateOthers","rule","isValidString","Error","validateNickname","isValidStringNickname","validatePhone","isValidStringPhone","serverIp","pass","user","localStorage","getItem","JSON","parse","required","message","trigger","min","max","validator","created","getUser","then","res","console","log","methods","request","get","loading","$loading","lock","text","spinner","background","setTimeout","close","$refs","validate","valid","$message","error","post","code","success","$emit","token","setItem","stringify","handleAvatarSuccess","form","avatarUrl","str","ValidStringPattern","e","ValidPhonePattern","ValidNicknamePattern","component"],"sourceRoot":""}