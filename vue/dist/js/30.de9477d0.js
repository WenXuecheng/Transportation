"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[30],{4030:function(e,r,t){t.r(r),t.d(r,{default:function(){return m}});var s=function(){var e=this,r=e._self._c;return r("div",{staticStyle:{position:"relative"}},[r("el-card",{staticStyle:{"max-width":"500px",margin:"auto"}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"80px"}},[r("el-form-item",{attrs:{label:e.$t("username"),prop:"username"}},[r("el-input",{attrs:{disabled:"",autocomplete:"off"},model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",r)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:e.$t("nickname"),prop:"nickname"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm.nickname,callback:function(r){e.$set(e.ruleForm,"nickname",r)},expression:"ruleForm.nickname"}})],1),r("el-form-item",{attrs:{label:e.$t("email"),prop:"email"}},[r("el-input",{model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}})],1),r("el-form-item",{attrs:{label:e.$t("phone"),prop:"phone"}},[r("el-input",{model:{value:e.ruleForm.phone,callback:function(r){e.$set(e.ruleForm,"phone",r)},expression:"ruleForm.phone"}})],1),r("el-form-item",{attrs:{label:e.$t("address"),prop:"address"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.address,callback:function(r){e.$set(e.ruleForm,"address",r)},expression:"ruleForm.address"}})],1),r("el-form-item",[r("el-button",{directives:[{name:"no-more-click",rawName:"v-no-more-click"}],attrs:{type:"primary"},on:{click:function(r){return e.save("ruleForm")}}},[e._v(e._s(e.$t("confirm")))])],1)],1)],1)],1)},a=[],l=t(2618),i={name:"Person",data(){var e=(e,r,t)=>{0==this.isValidString(r)?t(new Error("цифры, английский, русский языки и @.*/-+_:")):t()},r=(e,r,t)=>{0==this.isValidStringNickname(r)?t(new Error("цифры, английский и русский языки")):t()},t=(e,r,t)=>{0==this.isValidStringPhone(r)?t(new Error("Example：89692184441")):t()};return{serverIp:l.IV,pass:"",user:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{},ruleForm:{},rules:{username:[{required:!0,message:"имя пользователя",trigger:"blur"},{min:5,max:50,message:"Длина от 5 до 50 символов",trigger:"blur"},{validator:e,trigger:"blur"}],nickname:[{required:!0,message:"псевдоним",trigger:"blur"},{min:1,max:50,message:"Длина от 5 до 50 символов",trigger:"blur"},{validator:r,trigger:"blur"}],email:[{required:!0,message:"адрес электронной почты example.com",trigger:"blur"},{min:5,max:50,message:"Длина от 5 до 50 символов",trigger:"blur"},{validator:e,trigger:"blur"}],phone:[{required:!0,message:"номер телефона",trigger:"blur"},{min:5,max:15,message:"Длина от 5 до 15 символов",trigger:"blur"},{validator:t,trigger:"blur"}],address:[{required:!1,message:"",trigger:"blur"},{min:0,max:200,message:"Длина от 0 до 200 символов",trigger:"blur"}]}}},created(){this.getUser().then((e=>{this.ruleForm=e,console.log(this.ruleForm)}))},methods:{async getUser(){return(await this.request.get("/user/username/"+this.user.username)).data},save(){const e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.8)"});setTimeout((()=>{e.close()}),1e4),this.$refs["ruleForm"].validate((r=>{if(!r)return this.$message.error(this.$t("optfail")),e.close(),!1;this.request.post("/user/saveByUser",this.ruleForm).then((r=>{"200"===r.code?(this.$message.success(this.$t("ModifiedSuccessfully")),this.$emit("refreshUser"),this.getUser().then((e=>{e.token=JSON.parse(localStorage.getItem("user")).token,localStorage.setItem("user",JSON.stringify(e))}))):this.$message.error(this.$t("optfail")),e.close()}))}))},handleAvatarSuccess(e){this.form.avatarUrl=e},isValidString(e){try{return l.iO.test(e)}catch(r){return null}},isValidStringPhone(e){try{return l.yW.test(e)}catch(r){return null}},isValidStringNickname(e){try{return l.KQ.test(e)}catch(r){return null}}}},o=i,n=t(1001),u=(0,n.Z)(o,s,a,!1,null,null,null),m=u.exports}}]);
//# sourceMappingURL=30.de9477d0.js.map