{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { defineComponent } from 'vue';\nimport { serverIp, serverPort } from \"../../../public/config\";\nexport default defineComponent({\n  name: \"searchorder\",\n  data() {\n    return {\n      tableData: [{\n        orderName: 'sdafdsa',\n        sendRegion: 'dfad',\n        receiveRegion: 'sdadsf',\n        receiveAdress: 'dsfadfs',\n        dateOut: 'sddfsadsfa',\n        deliveryNum: 1,\n        others: ['dsfa', 'adsf'],\n        name: 'dsa',\n        phone: 'asdf',\n        email: 'sdfa',\n        details: 'sdfa',\n        remark: 'sfad',\n        pay: 'dsf',\n        username: 'asdf',\n        oderStatus: 3,\n        userUpload: ['https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg', 'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg', 'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg'],\n        adminUpload: ['https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg', 'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg', 'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg']\n      }],\n      centerDialogVisible: false,\n      uploadUsername: '',\n      uploadOrdername: '',\n      user: '',\n      fileList: [],\n      url: []\n    };\n  },\n  created() {\n    this.user = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {};\n    this.searchOrdersByUsername();\n  },\n  methods: {\n    handleAddPhoto(username, ordername) {\n      this.centerDialogVisible = true;\n      this.uploadUsername = username;\n      this.uploadOrdername = ordername;\n    },\n    deleteOrder() {},\n    uploadFileError(err, file, fileList) {\n      this.$message.error(\"上传失败！\");\n    },\n    exceedFile(files, fileList) {\n      this.$message.error('只能上传' + this.limitnum + '个文件');\n    },\n    removeFile(file, fileList) {\n      this.fileList = fileList;\n    },\n    loadJsonFromFile(file, fileList) {\n      this.fileList = fileList;\n    },\n    onBeforeUploadImage(file) {\n      const isIMAGE = file.type === 'image/jpeg' || 'image/jpg' || 'image/png';\n      const isLt1M = file.size / 1024 / 1024 < 5;\n      if (!isIMAGE) {\n        this.$message.error('上传文件只能是图片格式!');\n      }\n      if (!isLt1M) {\n        this.$message.error('上传文件大小不能超过 1MB!');\n      }\n      return isIMAGE && isLt1M;\n    },\n    uploadSuccess(response, file, fileList) {\n      console.log(response);\n      this.url.push(response);\n    },\n    submitUpload(username, orderName) {\n      console.log(this.url);\n      const newProperty1 = '';\n      // for (let i = 0; i < this.fileList.length; i++){\n      //     try {\n      //         let formData = new FormData();\n      //         formData.append('file', this.fileList[i].file)\n      //         this.request.post(\"/file/update\", formData).then(res => {\n      //             if (res.code === '200') {\n      //                 this.$message.success(\"上传成功\")\n      //                 let url = res.data\n      //                 console.log(url)\n      //             }\n      //         })\n      //     } catch (e){\n      //         this.$message.error(\"上传失败\")\n      //\n      //     }\n      // }\n    },\n\n    searchOrdersByUsername() {\n      this.request.get(\"/order/username/\" + this.user.username).then(res => {\n        res = JSON.parse(JSON.stringify(res.data));\n        this.tableData = res;\n        const newProperty1 = 'userUpload';\n        const newProperty2 = 'adminUpload';\n        for (let i = 0; i < this.tableData.length; i++) {\n          this.tableData[i][newProperty1] = ['https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg', 'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg', 'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg'];\n          this.tableData[i][newProperty2] = ['https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg', 'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg', 'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg'];\n          this.tableData[i].others = [this.tableData[i].others[0] + this.tableData[i].others[1], this.tableData[i].others[3] + this.tableData[i].others[4]];\n        }\n      });\n    }\n  }\n});","map":{"version":3,"names":["defineComponent","serverIp","serverPort","name","data","tableData","orderName","sendRegion","receiveRegion","receiveAdress","dateOut","deliveryNum","others","phone","email","details","remark","pay","username","oderStatus","userUpload","adminUpload","centerDialogVisible","uploadUsername","uploadOrdername","user","fileList","url","created","localStorage","getItem","JSON","parse","searchOrdersByUsername","methods","handleAddPhoto","ordername","deleteOrder","uploadFileError","err","file","$message","error","exceedFile","files","limitnum","removeFile","loadJsonFromFile","onBeforeUploadImage","isIMAGE","type","isLt1M","size","uploadSuccess","response","console","log","push","submitUpload","newProperty1","request","get","then","res","stringify","newProperty2","i","length"],"sources":["src/views/front/Searchorder.vue"],"sourcesContent":["<script>\r\nimport {defineComponent} from 'vue'\r\nimport {serverIp, serverPort} from \"../../../public/config\";\r\n\r\nexport default defineComponent({\r\n    name: \"searchorder\",\r\n    data() {\r\n        return {\r\n            tableData: [{\r\n                orderName: 'sdafdsa',\r\n                sendRegion: 'dfad',\r\n                receiveRegion: 'sdadsf',\r\n                receiveAdress: 'dsfadfs',\r\n                dateOut: 'sddfsadsfa',\r\n                deliveryNum: 1,\r\n                others: ['dsfa','adsf'],\r\n                name: 'dsa',\r\n                phone: 'asdf',\r\n                email: 'sdfa',\r\n                details: 'sdfa',\r\n                remark: 'sfad',\r\n                pay: 'dsf',\r\n                username: 'asdf',\r\n                oderStatus: 3,\r\n                userUpload: [\r\n                    'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg',\r\n                    'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg',\r\n                    'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg',\r\n                ],\r\n                adminUpload: [\r\n                    'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg',\r\n                    'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg',\r\n                    'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg',\r\n                ]},\r\n            ],\r\n            centerDialogVisible: false,\r\n            uploadUsername: '',\r\n            uploadOrdername: '',\r\n            user: '',\r\n            fileList: [],\r\n            url: []\r\n        }\r\n    },\r\n    created() {\r\n        this.user=localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : {}\r\n        this.searchOrdersByUsername()\r\n    },\r\n    methods:\r\n        {\r\n            handleAddPhoto(username, ordername){\r\n                this.centerDialogVisible = true\r\n                this.uploadUsername = username\r\n                this.uploadOrdername = ordername\r\n            },\r\n            deleteOrder(){\r\n\r\n            },\r\n            uploadFileError(err, file, fileList){\r\n                this.$message.error(\"上传失败！\")\r\n            },\r\n            exceedFile(files, fileList){\r\n                this.$message.error('只能上传'+this.limitnum+'个文件');\r\n            },\r\n            removeFile(file,fileList) {\r\n                this.fileList=fileList;\r\n            },\r\n            loadJsonFromFile(file, fileList) {\r\n                this.fileList = fileList\r\n            },\r\n            onBeforeUploadImage(file) {\r\n                const isIMAGE = file.type === 'image/jpeg' || 'image/jpg' || 'image/png'\r\n                const isLt1M = file.size / 1024 / 1024 < 5\r\n                if (!isIMAGE) {\r\n                    this.$message.error('上传文件只能是图片格式!')\r\n                }\r\n                if (!isLt1M) {\r\n                    this.$message.error('上传文件大小不能超过 1MB!')\r\n                }\r\n                return isIMAGE && isLt1M\r\n            },\r\n            uploadSuccess(response, file, fileList){\r\n                console.log(response)\r\n                this.url.push(response)\r\n            },\r\n            submitUpload(username, orderName) {\r\n                console.log(this.url)\r\n                const newProperty1=''\r\n                // for (let i = 0; i < this.fileList.length; i++){\r\n                //     try {\r\n                //         let formData = new FormData();\r\n                //         formData.append('file', this.fileList[i].file)\r\n                //         this.request.post(\"/file/update\", formData).then(res => {\r\n                //             if (res.code === '200') {\r\n                //                 this.$message.success(\"上传成功\")\r\n                //                 let url = res.data\r\n                //                 console.log(url)\r\n                //             }\r\n                //         })\r\n                //     } catch (e){\r\n                //         this.$message.error(\"上传失败\")\r\n                //\r\n                //     }\r\n                // }\r\n            },\r\n            searchOrdersByUsername(){\r\n                this.request.get(\"/order/username/\" + this.user.username).then(res => {\r\n                    res = JSON.parse(JSON.stringify(res.data))\r\n                    this.tableData = res\r\n                    const newProperty1='userUpload'\r\n                    const newProperty2='adminUpload'\r\n                    for (let i = 0; i < this.tableData.length; i++) {\r\n                        this.tableData[i][newProperty1] = [\r\n                            'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg',\r\n                            'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg',\r\n                            'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg',\r\n                        ]\r\n                        this.tableData[i][newProperty2] = [\r\n                            'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg',\r\n                            'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg',\r\n                            'https://www.ups.com/assets/resources/supplychain/images/350x197/m15-350x197-fast-fulfillment-assembly.jpg',\r\n                        ]\r\n                        this.tableData[i].others = [this.tableData[i].others[0] + this.tableData[i].others[1], this.tableData[i].others[3] + this.tableData[i].others[4]]\r\n                    }\r\n                })\r\n            },\r\n        }\r\n})\r\n</script>\r\n\r\n<template>\r\n    <div>\r\n        <el-table\r\n            header-cell-style=\"background-color: #DCDFE6; color: #606266;\"\r\n            :data=\"tableData\"\r\n            border\r\n            style=\"width: 100%; border-radius:25px \"\r\n            height=\"780\"\r\n            width=\"100%\"\r\n            size=\"medium\"\r\n            default-expand-all=\"ture\">\r\n            <el-table-column type=\"expand\" align-center=\"true\">\r\n                <template slot-scope=\"props\">\r\n\r\n                    <el-descriptions column=\"3\" size=\"mini\" border>\r\n                        <template slot=\"extra\">\r\n                            <el-button type=\"primary\" size=\"mini\" @click=\"handleAddPhoto(props.row.username,props.row.orderName)\">上传照片</el-button>\r\n                            <el-button type=\"danger\" size=\"mini\" @click=\"deleteOrder\">撤销订单</el-button>\r\n                        </template>\r\n                        <el-descriptions-item>\r\n                            <template slot=\"label\">\r\n                                <i class=\"el-icon-user\"></i>\r\n                                姓名\r\n                            </template>\r\n                            {{ props.row.name }}\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item>\r\n                            <template slot=\"label\">\r\n                                <i class=\"el-icon-mobile-phone\"></i>\r\n                                手机号\r\n                            </template>\r\n                            {{ props.row.phone }}\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item>\r\n                            <template slot=\"label\">\r\n                                <i class=\"el-icon-location-outline\"></i>\r\n                                物品数量/重量\r\n                            </template>\r\n                            {{ props.row.deliveryNum }}kg\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item>\r\n                            <template slot=\"label\">\r\n                                <i class=\"el-icon-tickets\"></i>\r\n                                收货地址\r\n                            </template>\r\n                            <el-tag size=\"small\">{{ props.row.receiveAdress}}</el-tag>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item>\r\n                            <template slot=\"label\">\r\n                                <i class=\"el-icon-office-building\"></i>\r\n                                寄货站点\r\n                            </template>\r\n                            {{props.row.sendRegion}}\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item>\r\n                            <template slot=\"label\">\r\n                                <i class=\"el-icon-office-building\"></i>\r\n                                取货站点\r\n                            </template>\r\n                            {{ props.row.receiveRegion}}\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item>\r\n                            <template slot=\"label\">\r\n                                <i class=\"el-icon-tickets\"></i>\r\n                                邮箱\r\n                            </template>\r\n                            <el-tag size=\"small\">{{ props.row.email}}</el-tag>\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item>\r\n                            <template slot=\"label\">\r\n                                <i class=\"el-icon-office-building\"></i>\r\n                                物品详情\r\n                            </template>\r\n                            {{ props.row.details}}\r\n                        </el-descriptions-item>\r\n                        <el-descriptions-item>\r\n                            <template slot=\"label\">\r\n                                <i class=\"el-icon-office-building\"></i>\r\n                                备注\r\n                            </template>\r\n                            {{ props.row.remark}}\r\n                        </el-descriptions-item>\r\n                    </el-descriptions>\r\n\r\n                    <template>\r\n                        <div >\r\n                            <el-row>\r\n                                <el-col :span=\"12\"><div class=\"grid-content bg-purple\">\r\n                                    <el-carousel :interval=\"5000\" arrow=\"always\" style=\"width: 100%\" >\r\n                                        <div style=\"margin-top: 1%;margin-left: 40%; color: #606266;\"><span>仓库</span></div>\r\n                                        <el-carousel-item v-for=\"item in props.row.userUpload\" :key=\"item\" >\r\n                                            <el-image\r\n                                                style=\"width: 80%; height: 80%; margin-top: 5%;margin-left: 10%;\"\r\n                                                align=\"center\"\r\n                                                :src=\"item\"\r\n                                                fit=\"contain\">\r\n                                            </el-image>\r\n                                        </el-carousel-item>\r\n                            </el-carousel>\r\n                                </div></el-col>\r\n                                <el-col :span=\"12\"><div class=\"grid-content bg-purple\">\r\n                                    <el-carousel :interval=\"5000\" arrow=\"always\" style=\"width: 100%\" >\r\n                                        <div style=\"margin-top: 1%;margin-left: 40%; color: #606266;\"><span>快件</span></div>\r\n                                        <el-carousel-item v-for=\"item in props.row.adminUpload\" :key=\"item\" >\r\n                                            <el-image\r\n                                                style=\"width: 80%; height: 80%; margin-top: 5%;margin-left: 10%;\"\r\n                                                align=\"center\"\r\n                                                :src=\"item\"\r\n                                                fit=\"contain\">\r\n                                            </el-image>\r\n                                        </el-carousel-item>\r\n                                    </el-carousel>\r\n                                </div></el-col>\r\n                            </el-row>\r\n                        </div>\r\n                    </template>\r\n\r\n                    <template>\r\n                        <div style=\"margin-top: 10px\">\r\n                            <el-steps :space=\"200\" :active=\"props.row.oderStatus\" finish-status=\"success\" align-center=\"true\">\r\n                                <el-step title=\"订单已提交\"></el-step>\r\n                                <el-step title=\"订单等待付款\"></el-step>\r\n                                <el-step title=\"已发出\"></el-step>\r\n                                <el-step :title=\"'已到达' + props.row.receiveRegion\"></el-step>\r\n                                <el-step title=\"待取件\"></el-step>\r\n                                <el-step title=\"已取件\"></el-step>\r\n                            </el-steps>\r\n                        </div>\r\n                    </template>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n                label=\"订单号\"\r\n                prop=\"orderName\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                label=\"保险\"\r\n                prop=\"others[0]\">\r\n            </el-table-column>\r\n            <el-table-column\r\n                label=\"自提\"\r\n                prop=\"others[1]\">\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <el-dialog\r\n            title=\"上传照片\"\r\n            :visible.sync=\"centerDialogVisible\"\r\n            width=\"30%\"\r\n            center>\r\n            <el-upload\r\n                class=\"upload-demo\"\r\n                accept=\"image/jpeg,image/png,image/jpg\"\r\n                ref=\"upload\"\r\n                :auto-upload=\"true\"\r\n                :file-list=\"fileList\"\r\n                :before-upload=\"onBeforeUploadImage\"\r\n                :on-success=\"uploadSuccess\"\r\n                :on-change=\"loadJsonFromFile\"\r\n                :limit=\"10\"\r\n                :on-exceed=\"exceedFile\"\r\n                :on-remove=\"removeFile\"\r\n                :on-error=\"uploadFileError\"\r\n                action=\"http://localhost:9090/file/upload\">\r\n                <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取照片</el-button>\r\n                <el-button style=\"margin-left: 10px;\" size=\"small\" type=\"success\" @click=\"submitUpload(uploadUsername,uploadOrdername)\">上传到服务器</el-button>\r\n                <div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>\r\n            </el-upload>\r\n        </el-dialog>\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n<style>\r\n.demo-table-expand label {\r\n    width: 90px;\r\n    color: #99a9bf;\r\n}\r\n.demo-table-expand .el-form-item {\r\n    margin-right: 0;\r\n    margin-bottom: 0;\r\n    width: 50%;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}