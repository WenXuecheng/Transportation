{"ast":null,"code":"import Aside from \"@/components/Aside\";\nimport Header from \"@/components/Header\";\nexport default {\n  name: 'Home',\n  data() {\n    return {\n      collapseBtnClass: 'el-icon-s-fold',\n      isCollapse: false,\n      sideWidth: 200,\n      logoTextShow: true,\n      user: {},\n      menus: [],\n      opens: []\n    };\n  },\n  components: {\n    Aside,\n    Header\n  },\n  created() {\n    // 从后台获取最新的User数据\n    this.getUser();\n    this.loadMenu();\n  },\n  methods: {\n    collapse() {\n      // 点击收缩按钮触发\n      this.isCollapse = !this.isCollapse;\n      if (this.isCollapse) {\n        // 收缩\n        this.sideWidth = 64;\n        this.collapseBtnClass = 'el-icon-s-unfold';\n        this.logoTextShow = false;\n      } else {\n        // 展开\n        this.sideWidth = 200;\n        this.collapseBtnClass = 'el-icon-s-fold';\n        this.logoTextShow = true;\n      }\n    },\n    getUser() {\n      let username = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")).username : \"\";\n      if (username) {\n        // 从后台获取User数据\n        this.request.get(\"/user/username/\" + username).then(res => {\n          // 重新赋值后台的最新User数据\n          this.user = res.data;\n        });\n      }\n    },\n    loadMenu() {\n      let upadataUsername = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")).username : \"\";\n      this.request.get(\"/menu/username/\" + upadataUsername).then(res => {\n        console.log(res);\n        //localStorage.setItem(\"menus\", JSON.stringify(res))\n        // this.menus = JSON.stringify(res)\n        // this.opens = JSON.stringify(res)\n        // this.menus = localStorage.getItem(\"menus\") ? JSON.parse(localStorage.getItem(\"menus\")) : []\n        // this.opens = localStorage.getItem(\"menus\") ? JSON.parse(localStorage.getItem(\"menus\")).map(v => v.id + '') : []\n      });\n    }\n  }\n};","map":{"version":3,"names":["Aside","Header","name","data","collapseBtnClass","isCollapse","sideWidth","logoTextShow","user","menus","opens","components","created","getUser","loadMenu","methods","collapse","username","localStorage","getItem","JSON","parse","request","get","then","res","upadataUsername","console","log"],"sources":["src/views/Manage.vue"],"sourcesContent":["<template>\n    <el-container style=\"min-height: 100vh\">\n\n        <el-aside :width=\"sideWidth + 'px'\" style=\"box-shadow: 2px 0 6px rgb(0 21 41 / 35%);\">\n            <Aside :isCollapse=\"isCollapse\" :logoTextShow=\"logoTextShow\" :menus=\"menus\" :opens=\"opens\"/>\n        </el-aside>\n\n        <el-container>\n            <el-header style=\"border-bottom: 1px solid #ccc;\">\n                <Header :collapseBtnClass=\"collapseBtnClass\" @asideCollapse=\"collapse\" :user=\"user\"/>\n            </el-header>\n\n            <el-main>\n                <!--        表示当前页面的子路由会在 <router-view /> 里面展示-->\n                <router-view  @refreshUser=\"getUser\" @refreshMenu=\"loadMenu\"/>\n            </el-main>\n\n        </el-container>\n    </el-container>\n</template>\n\n<script>\n\nimport Aside from \"@/components/Aside\";\nimport Header from \"@/components/Header\";\n\nexport default {\n    name: 'Home',\n    data() {\n        return {\n            collapseBtnClass: 'el-icon-s-fold',\n            isCollapse: false,\n            sideWidth: 200,\n            logoTextShow: true,\n            user: {},\n            menus: [],\n            opens: []\n        }\n    },\n    components: {\n        Aside,\n        Header\n    },\n    created() {\n        // 从后台获取最新的User数据\n        this.getUser()\n        this.loadMenu()\n    },\n    methods: {\n        collapse() {  // 点击收缩按钮触发\n            this.isCollapse = !this.isCollapse\n            if (this.isCollapse) {  // 收缩\n                this.sideWidth = 64\n                this.collapseBtnClass = 'el-icon-s-unfold'\n                this.logoTextShow = false\n            } else {   // 展开\n                this.sideWidth = 200\n                this.collapseBtnClass = 'el-icon-s-fold'\n                this.logoTextShow = true\n            }\n        },\n        getUser() {\n            let username = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")).username : \"\"\n            if (username) {\n                // 从后台获取User数据\n                this.request.get(\"/user/username/\" + username).then(res => {\n                    // 重新赋值后台的最新User数据\n                    this.user = res.data\n                })\n            }\n        },\n        loadMenu() {\n            let upadataUsername = localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")).username : \"\"\n            this.request.get(\"/menu/username/\" + upadataUsername).then(res => {\n                console.log(res)\n                //localStorage.setItem(\"menus\", JSON.stringify(res))\n                // this.menus = JSON.stringify(res)\n                // this.opens = JSON.stringify(res)\n                // this.menus = localStorage.getItem(\"menus\") ? JSON.parse(localStorage.getItem(\"menus\")) : []\n                // this.opens = localStorage.getItem(\"menus\") ? JSON.parse(localStorage.getItem(\"menus\")).map(v => v.id + '') : []\n            })\n        }\n    }\n}\n</script>\n\n"],"mappings":"AAuBA,OAAAA,KAAA;AACA,OAAAC,MAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,gBAAA;MACAC,UAAA;MACAC,SAAA;MACAC,YAAA;MACAC,IAAA;MACAC,KAAA;MACAC,KAAA;IACA;EACA;EACAC,UAAA;IACAX,KAAA;IACAC;EACA;EACAW,QAAA;IACA;IACA,KAAAC,OAAA;IACA,KAAAC,QAAA;EACA;EACAC,OAAA;IACAC,SAAA;MAAA;MACA,KAAAX,UAAA,SAAAA,UAAA;MACA,SAAAA,UAAA;QAAA;QACA,KAAAC,SAAA;QACA,KAAAF,gBAAA;QACA,KAAAG,YAAA;MACA;QAAA;QACA,KAAAD,SAAA;QACA,KAAAF,gBAAA;QACA,KAAAG,YAAA;MACA;IACA;IACAM,QAAA;MACA,IAAAI,QAAA,GAAAC,YAAA,CAAAC,OAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAH,YAAA,CAAAC,OAAA,UAAAF,QAAA;MACA,IAAAA,QAAA;QACA;QACA,KAAAK,OAAA,CAAAC,GAAA,qBAAAN,QAAA,EAAAO,IAAA,CAAAC,GAAA;UACA;UACA,KAAAjB,IAAA,GAAAiB,GAAA,CAAAtB,IAAA;QACA;MACA;IACA;IACAW,SAAA;MACA,IAAAY,eAAA,GAAAR,YAAA,CAAAC,OAAA,WAAAC,IAAA,CAAAC,KAAA,CAAAH,YAAA,CAAAC,OAAA,UAAAF,QAAA;MACA,KAAAK,OAAA,CAAAC,GAAA,qBAAAG,eAAA,EAAAF,IAAA,CAAAC,GAAA;QACAE,OAAA,CAAAC,GAAA,CAAAH,GAAA;QACA;QACA;QACA;QACA;QACA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}